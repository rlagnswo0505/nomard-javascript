{"version":3,"sources":["src/weather.js"],"names":["weather","document","querySelector","APIKEY","COORDS","getWeather","lat","lng","fetch","then","response","json","temperature","main","temp","place","name","innerText","saveCoords","coordObj","localStorage","setItem","JSON","stringify","handleGeoSuccess","position","latitude","coords","longitude","coordsObj","handleGeoError","console","log","askForCoodrs","navigator","geolocation","getCurrentPosition","loadCoord","loadedCoords","getItem","parsedCoords","parse","init"],"mappings":"AAAA,IAAMA,OAAO,GAAGC,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAAhB;AAEAC,MAAM,GAAG,kCAAT;AACA,IAAMC,MAAM,GAAG,QAAf;;AAEA,SAASC,UAAT,CAAoBC,GAApB,EAAyBC,GAAzB,EAA8B;AAC1BC,EAAAA,KAAK,+DACsDF,GADtD,kBACiEC,GADjE,oBAC8EJ,MAD9E,mBAAL,CAGKM,IAHL,CAGU,UAAUC,QAAV,EAAoB;AACtB,WAAOA,QAAQ,CAACC,IAAT,EAAP;AACH,GALL,EAMKF,IANL,CAMU,UAAUE,IAAV,EAAgB;AAClB,QAAMC,WAAW,GAAGD,IAAI,CAACE,IAAL,CAAUC,IAA9B;AACA,QAAMC,KAAK,GAAGJ,IAAI,CAACK,IAAnB;AACAhB,IAAAA,OAAO,CAACiB,SAAR,aAAuBL,WAAvB,qBAA0CG,KAA1C;AACH,GAVL;AAWH;;AAED,SAASG,UAAT,CAAoBC,QAApB,EAA8B;AAC1BC,EAAAA,YAAY,CAACC,OAAb,CAAqBjB,MAArB,EAA6BkB,IAAI,CAACC,SAAL,CAAeJ,QAAf,CAA7B;AACH;;AAED,SAASK,gBAAT,CAA0BC,QAA1B,EAAoC;AAChC,MAAMC,QAAQ,GAAGD,QAAQ,CAACE,MAAT,CAAgBD,QAAjC;AACA,MAAME,SAAS,GAAGH,QAAQ,CAACE,MAAT,CAAgBC,SAAlC;AACA,MAAMC,SAAS,GAAG;AACdH,IAAAA,QAAQ,EAARA,QADc;AAEdE,IAAAA,SAAS,EAATA;AAFc,GAAlB;AAIAV,EAAAA,UAAU,CAACW,SAAD,CAAV;AACAxB,EAAAA,UAAU,CAACqB,QAAD,EAAWE,SAAX,CAAV;AACH;;AAED,SAASE,cAAT,GAA0B;AACtBC,EAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ;AACH;;AAED,SAASC,YAAT,GAAwB;AACpBC,EAAAA,SAAS,CAACC,WAAV,CAAsBC,kBAAtB,CAAyCZ,gBAAzC,EAA2DM,cAA3D;AACH;;AAED,SAASO,SAAT,GAAqB;AACjB,MAAMC,YAAY,GAAGlB,YAAY,CAACmB,OAAb,CAAqBnC,MAArB,CAArB;;AACA,MAAIkC,YAAY,KAAK,IAArB,EAA2B;AACvBL,IAAAA,YAAY;AACf,GAFD,MAEO;AACH,QAAMO,YAAY,GAAGlB,IAAI,CAACmB,KAAL,CAAWH,YAAX,CAArB;AACAjC,IAAAA,UAAU,CAACmC,YAAY,CAACd,QAAd,EAAwBc,YAAY,CAACZ,SAArC,CAAV;AACH;AACJ;;AAED,SAASc,IAAT,GAAgB;AACZL,EAAAA,SAAS;AACZ;;AAEDK,IAAI","file":"weather.b54aa584.js","sourceRoot":"..","sourcesContent":["const weather = document.querySelector(\".js-weather\");\r\n\r\nAPIKEY = \"615afdc6890061326d688c02af8bab1c\";\r\nconst COORDS = \"coords\";\r\n\r\nfunction getWeather(lat, lng) {\r\n    fetch(\r\n        `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lng}&appid=${APIKEY}&units=metric`\r\n    )\r\n        .then(function (response) {\r\n            return response.json();\r\n        })\r\n        .then(function (json) {\r\n            const temperature = json.main.temp;\r\n            const place = json.name;\r\n            weather.innerText = `${temperature}ÂºC @ ${place}`;\r\n        });\r\n}\r\n\r\nfunction saveCoords(coordObj) {\r\n    localStorage.setItem(COORDS, JSON.stringify(coordObj));\r\n}\r\n\r\nfunction handleGeoSuccess(position) {\r\n    const latitude = position.coords.latitude;\r\n    const longitude = position.coords.longitude;\r\n    const coordsObj = {\r\n        latitude,\r\n        longitude,\r\n    };\r\n    saveCoords(coordsObj);\r\n    getWeather(latitude, longitude);\r\n}\r\n\r\nfunction handleGeoError() {\r\n    console.log(\"can't access the geo location\");\r\n}\r\n\r\nfunction askForCoodrs() {\r\n    navigator.geolocation.getCurrentPosition(handleGeoSuccess, handleGeoError);\r\n}\r\n\r\nfunction loadCoord() {\r\n    const loadedCoords = localStorage.getItem(COORDS);\r\n    if (loadedCoords === null) {\r\n        askForCoodrs();\r\n    } else {\r\n        const parsedCoords = JSON.parse(loadedCoords);\r\n        getWeather(parsedCoords.latitude, parsedCoords.longitude);\r\n    }\r\n}\r\n\r\nfunction init() {\r\n    loadCoord();\r\n}\r\n\r\ninit();\r\n"]}